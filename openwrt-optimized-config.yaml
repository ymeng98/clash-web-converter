# OpenWrtè½¯è·¯ç”±ä¸“ç”¨Clashé…ç½®
# åŸºäºåŸå§‹è½¬æ¢å™¨è¾“å‡ºï¼Œé’ˆå¯¹è½¯è·¯ç”±ç¯å¢ƒä¼˜åŒ–

# åŸºç¡€ç½‘ç»œé…ç½®
mixed-port: 7890
allow-lan: true
bind-address: '0.0.0.0'
mode: rule
log-level: info
external-controller: '0.0.0.0:9090'
external-ui: dashboard

# IPv6é…ç½®ï¼ˆè½¯è·¯ç”±å»ºè®®ï¼‰
ipv6: false

# DNSé…ç½®ï¼ˆè½¯è·¯ç”±ä¼˜åŒ–ï¼‰
dns:
  enable: true
  ipv6: false
  listen: '0.0.0.0:1053'
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - '*.local'
    - 'localhost.ptlogin2.qq.com'
  default-nameserver:
    - 114.114.114.114
    - 223.5.5.5
  nameserver:
    - 'https://doh.pub/dns-query'
    - 'https://dns.alidns.com/dns-query'
  fallback:
    - 'https://cloudflare-dns.com/dns-query'
    - 'https://dns.google/dns-query'
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

# TUNæ¨¡å¼é…ç½®ï¼ˆè½¯è·¯ç”±æ¨èï¼‰
tun:
  enable: true
  stack: system
  dns-hijack:
    - 198.18.0.2:53
  auto-route: true
  auto-detect-interface: true

# ä»£ç†èŠ‚ç‚¹ï¼ˆä¿æŒåŸå§‹èŠ‚ç‚¹é…ç½®ï¼‰
proxies:
- name: ğŸ‡­ğŸ‡° é¦™æ¸¯ä¸­è½¬
  type: trojan
  server: wb.kaiqsz.com
  port: 12221
  password: 57496987-12da-4e70-a3fe-38a6ce2c0718
  udp: true
  skip-cert-verify: true
  sni: mmbiz.redapricotcloud.com
  network: tcp

- name: ğŸ‡ºğŸ‡¸ ç¾å›½ä¸­è½¬
  type: trojan
  server: wb.kaiqsz.com
  port: 21489
  password: 57496987-12da-4e70-a3fe-38a6ce2c0718
  udp: true
  skip-cert-verify: true
  sni: mmbiz.redapricotcloud.com
  network: tcp

- name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ä¸­è½¬
  type: trojan
  server: wb.kaiqsz.com
  port: 28713
  password: 57496987-12da-4e70-a3fe-38a6ce2c0718
  udp: true
  skip-cert-verify: true
  sni: mmbiz1.redapricotcloud.com
  network: tcp

- name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ä¸­è½¬
  type: trojan
  server: wb.kaiqsz.com
  port: 48291
  password: 57496987-12da-4e70-a3fe-38a6ce2c0718
  udp: true
  skip-cert-verify: true
  sni: mmbiz1.redapricotcloud.com
  network: tcp

- name: ğŸ‡¨ğŸ‡³ å°æ¹¾ä¸­è½¬
  type: trojan
  server: wb.kaiqsz.com
  port: 42765
  password: 57496987-12da-4e70-a3fe-38a6ce2c0718
  udp: true
  skip-cert-verify: true
  sni: mmbiz1.redapricotcloud.com
  network: tcp

# ä»£ç†ç»„é…ç½®ï¼ˆè½¯è·¯ç”±ä¼˜åŒ–ï¼‰
proxy-groups:
- name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  type: select
  proxies:
    - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    - ğŸ”¯ æ•…éšœè½¬ç§»
    - ğŸ”® è´Ÿè½½å‡è¡¡
    - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
    - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    - DIRECT

- name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  type: url-test
  proxies:
    - ğŸ‡­ğŸ‡° é¦™æ¸¯ä¸­è½¬
    - ğŸ‡ºğŸ‡¸ ç¾å›½ä¸­è½¬
    - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ä¸­è½¬
    - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ä¸­è½¬
    - ğŸ‡¨ğŸ‡³ å°æ¹¾ä¸­è½¬
  url: 'http://www.gstatic.com/generate_204'
  interval: 300
  tolerance: 50

- name: ğŸ”¯ æ•…éšœè½¬ç§»
  type: fallback
  proxies:
    - ğŸ‡­ğŸ‡° é¦™æ¸¯ä¸­è½¬
    - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ä¸­è½¬
    - ğŸ‡ºğŸ‡¸ ç¾å›½ä¸­è½¬
    - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ä¸­è½¬
  url: 'http://www.gstatic.com/generate_204'
  interval: 300

- name: ğŸ”® è´Ÿè½½å‡è¡¡
  type: load-balance
  strategy: consistent-hashing
  proxies:
    - ğŸ‡­ğŸ‡° é¦™æ¸¯ä¸­è½¬
    - ğŸ‡ºğŸ‡¸ ç¾å›½ä¸­è½¬
    - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ä¸­è½¬
    - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ä¸­è½¬
  url: 'http://www.gstatic.com/generate_204'
  interval: 300

- name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
  type: select
  proxies:
    - ğŸ‡­ğŸ‡° é¦™æ¸¯ä¸­è½¬

- name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
  type: select
  proxies:
    - ğŸ‡ºğŸ‡¸ ç¾å›½ä¸­è½¬

- name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
  type: select
  proxies:
    - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ä¸­è½¬

- name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
  type: select
  proxies:
    - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ä¸­è½¬

- name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
  type: select
  proxies:
    - ğŸ‡¨ğŸ‡³ å°æ¹¾ä¸­è½¬

- name: ğŸŒ å›½å¤–åª’ä½“
  type: select
  proxies:
    - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹

- name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  type: select
  proxies:
    - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
    - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹

- name: ğŸƒ åº”ç”¨å‡€åŒ–
  type: select
  proxies:
    - REJECT
    - DIRECT

- name: ğŸŸ æ¼ç½‘ä¹‹é±¼
  type: select
  proxies:
    - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    - DIRECT

# åˆ†æµè§„åˆ™ï¼ˆè½¯è·¯ç”±ä¸“ç”¨ï¼‰
rules:
  # æœ¬åœ°ç½‘ç»œç›´è¿
  - DOMAIN-SUFFIX,local,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,17.0.0.0/8,DIRECT
  - IP-CIDR,100.64.0.0/10,DIRECT
  - IP-CIDR,224.0.0.0/4,DIRECT
  - IP-CIDR6,fe80::/10,DIRECT

  # OpenWrtç®¡ç†é¡µé¢
  - DOMAIN-SUFFIX,openwrt.lan,DIRECT
  - DOMAIN-SUFFIX,router.lan,DIRECT
  - IP-CIDR,192.168.1.1/32,DIRECT

  # å¹¿å‘Šæ‹¦æˆª
  - DOMAIN-SUFFIX,googlesyndication.com,ğŸƒ åº”ç”¨å‡€åŒ–
  - DOMAIN-SUFFIX,googleadservices.com,ğŸƒ åº”ç”¨å‡€åŒ–
  - DOMAIN-KEYWORD,adnxs,ğŸƒ åº”ç”¨å‡€åŒ–
  - DOMAIN-KEYWORD,adsystem,ğŸƒ åº”ç”¨å‡€åŒ–

  # Telegram
  - DOMAIN-SUFFIX,t.me,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - DOMAIN-SUFFIX,tdesktop.com,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - DOMAIN-SUFFIX,telegra.ph,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - DOMAIN-SUFFIX,telegram.org,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - IP-CIDR,91.108.4.0/22,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - IP-CIDR,91.108.8.0/21,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - IP-CIDR,91.108.16.0/22,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - IP-CIDR,149.154.160.0/20,ğŸ“² ç”µæŠ¥æ¶ˆæ¯

  # å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,youtube.com,ğŸŒ å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,googlevideo.com,ğŸŒ å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,netflix.com,ğŸŒ å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,nflximg.net,ğŸŒ å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,twitter.com,ğŸŒ å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,facebook.com,ğŸŒ å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,instagram.com,ğŸŒ å›½å¤–åª’ä½“

  # å›½å†…ç›´è¿
  - DOMAIN-SUFFIX,cn,DIRECT
  - DOMAIN-KEYWORD,-cn,DIRECT
  - GEOIP,CN,DIRECT

  # æ¼ç½‘ä¹‹é±¼
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼ 